"use strict";(self.webpackChunkggc_distance=self.webpackChunkggc_distance||[]).push([[691],{3330:function(e,t){t.Z=function(e){return setTimeout((function(){return e.target.setSelectionRange(0,10)}),1)}},8042:function(e,t,r){function n(e){return Array.from({length:e},(function(){return 0}))}function a(e){return Array.from({length:e},(function(e,t){return t}))}function l(e,t){return Array.from({length:e},(function(){return n(t)}))}r.d(t,{et:function(){return n},Ue:function(){return a},_X:function(){return l}})},1595:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var n=r(7294),a=r(4294),l=r(2982),o=r(2346),i=r(3075),u=r(8054),c=r(3330),s=r(8042);function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){if(0==e.length)return[];if(1==e.length)return[e];for(var r=e.sort(t),n=[],a=0,l=0;l<r.length;l=a){for(a=l+1;a<r.length&&0==t(r[l],r[a]);)a++;n.push(r.slice(l,a))}return n}function d(e,t,r){for(var n,a=(0,s._X)(t,r),l=0,o=m(e);!(n=o()).done;){for(var i=n.value,u=0;u<t;u++)for(var c=0;c<i.judges;c++)a[u][c+l]=i.marks[u][c];l+=i.judges}return a}function p(e){return{from:e,to:e}}function g(e){return e?(e.from+e.to)/2:0}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t,r){for(var n=Math.floor(e.judges/2)+1,a=[],l=0;l<e.competitors;l++){for(var o=(0,s.et)(e.competitors+1),i=(0,s.et)(e.competitors+1),u=0;u<e.judges;u++){var c,m,f=null!==(c=null===(m=e.marks[l])||void 0===m?void 0:m[u])&&void 0!==c?c:0;if(f>0)for(var d=f;d<=e.competitors;d++)o[d]++,i[d]+=f}a[l]={majority:o,sum:i,index:l}}for(var p=t||(0,s.Ue)(e.competitors),g=(0,s.Ue)(e.competitors).map((function(t){return(0,s.et)(e.competitors+1).map((function(e){}))})),k=[],b=r||1,E=b;p.length&&E<=e.competitors;){for(var y,j=v(p.map((function(e){return a[e]})).map((function(e){var t=null==e?void 0:e.majority[E],r=g[(null==e?void 0:e.index)||0];return r&&(r[E]=0==t?"-":null==t?void 0:t.toString()),e})).filter((function(e){return((null==e?void 0:e.majority[E])||0)>=n})).map((function(e){return{index:e.index,majority:e.majority.slice(E),sum:e.sum.slice(E)}})),(function(e,t){for(var r=0;r<e.majority.length;r++){var n=E+r;g[e.index][n]=e.majority[r].toString(),g[t.index][n]=t.majority[r].toString();var a=(t.majority[r]||0)-(e.majority[r]||0);if(a)return a;g[e.index][n]+=" ("+e.sum[r]+")",g[t.index][n]+=" ("+t.sum[r]+")";var l=(e.sum[r]||0)-(t.sum[r]||0);if(l)return l}return 0})),S=h(j);!(y=S()).done;){for(var w,A=y.value,I=function(){var e=w.value;k[e.index]={from:b,to:b+A.length-1},p=p.filter((function(t){return t!=e.index}))},N=h(A);!(w=N()).done;)I();b+=A.length}E++}return{places:k,table:g}}function E(e){if("object"!=typeof e)return e;var t,r,n=Object.prototype.toString.call(e);if("[object Object]"===n){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in r=new e.constructor,e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=E(e[t]));else for(t in r={},e)"__proto__"===t?Object.defineProperty(r,t,{value:E(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=E(e[t]);return r}if("[object Array]"===n){for(t=e.length,r=Array(t);t--;)r[t]=E(e[t]);return r}return"[object Set]"===n?(r=new Set,e.forEach((function(e){r.add(E(e))})),r):"[object Map]"===n?(r=new Map,e.forEach((function(e,t){r.set(E(t),E(e))})),r):"[object Date]"===n?new Date(+e):"[object RegExp]"===n?((r=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,r):"[object DataView]"===n?new e.constructor(E(e.buffer)):"[object ArrayBuffer]"===n?e.slice(0):"Array]"===n.slice(-6)?new e.constructor(e):e}function y(e){for(var t,r=E(e),n=0,a=[],o=(0,s.et)(r.competitors+1),i=0;i<r.competitors;i++){a[i]=!0;for(var u=0;u<r.judges;u++){var c,m=(null===(c=r.marks[i])||void 0===c?void 0:c[u])||0;if(m<=0||m>r.competitors){a[i]=!1;break}}if(a[i]){for(var f=0;f<r.judges;f++){var v,d=(null===(v=r.marks[i])||void 0===v?void 0:v[f])||0;o[d]++}n++}}function h(e){var t=a.map((function(e,t){return e?-1:t})).filter((function(e){return e>=0}));if(0!=t.length){for(var n=t.filter((function(t,r){return r<e})),i=t.filter((function(t,r){return r>=e})),u=[],c=function(e){u.push.apply(u,(0,l.Z)((0,s.et)(r.judges-(o[e]||0)).map((function(){return e}))))},m=r.competitors;m>0;m--)c(m);for(var f=function(){for(var e=d[v],t=(0,s.et)(r.competitors),n=(0,l.Z)(e),a=0;a<r.judges;a++){for(var o=0;o<n.length;o++){var i=r.marks[n[o]||0],c=u.pop()||0;i&&(i[a]=c),t[n[o]||0]+=c}n=n.sort((function(e,r){return-(t[e]||0)+(t[r]||0)}))}},v=0,d=[n,i];v<d.length;v++)f()}}for(var k=[],y={from:p(r.competitors),to:p(1)},j=0;j<r.competitors;j++)a[j]?k[j]={from:p(r.competitors),to:p(1)}:k[j]=y;for(var S=0;S<=r.competitors-n;S++){h(S);var w=b(r);t=w.table;for(var A=0;A<r.competitors;A++){var I=w.places[A];if(I){var N=k[A];N&&(g(N.from)>g(I)&&(N.from=I),g(N.to)<g(I)&&(N.to=I))}}}if(t&&n<r.competitors-1)for(var x=0;x<r.competitors;x++)a[x]||(t[x]=(0,s.et)(r.competitors+1).map((function(e){return""})));return{table:t,places:k}}function j(e){for(var t=Object.assign({},e,{marks:(0,s._X)(e.competitors,e.judges)}),r=0;r<e.competitors;r++)for(var n=0;n<e.judges;n++){var a;t.marks[r][n]=(null===(a=e.marks[r])||void 0===a?void 0:a[n])||0}return t}var S=(0,o.LO)({competitors:6,judges:5,marks:[j({competitors:6,judges:5,marks:[]})],results:void 0,setMark:function(e,t,r,n){var a,l=null===(a=this.marks[e])||void 0===a?void 0:a.marks[t];l&&(l[r]=n)},setCompetitors:function(e){this.competitors=e;for(var t=0;t<this.marks.length;t++)this.marks[t]=j(Object.assign({},this.marks[t],{competitors:Math.min(9,e)}))},setJudges:function(e){this.judges=e;for(var t=0;t<this.marks.length;t++)this.marks[t]=j(Object.assign({},this.marks[t],{judges:Math.min(11,e)}))},setDances:function(e){for(var t=[],r=0;r<e;r++)t[r]=this.marks[r]||j({marks:[],judges:this.judges,competitors:this.competitors});this.marks=t},delete:function(){if(confirm("Alle Wertungen löschen?"))for(var e=0;e<this.marks.length;e++)this.marks[e]=j(Object.assign({},this.marks[e],{marks:[]}))},get valid(){for(var e=this.marks.map((function(e){return e.marks.map((function(e){return e.map((function(){return!0}))}))})),t=this.marks.map((function(){return!0})),r=0;r<this.marks.length;r++){var n=this.marks[r];if(n)for(var a=0;a<n.judges;a++)for(var l=[],o=0;o<n.competitors;o++){var i,u,c=(null===(i=n.marks[o])||void 0===i?void 0:i[a])||0;c<=0?t[r]=!1:c>n.competitors?(e[r][o][a]=!1,t[r]=!1):(null!==(u=l[c])&&void 0!==u?u:-1)>=0&&(e[r][o][a]=!1,e[r][l[c]][a]=!1,t[r]=!1),l[c]=o}}return{danceValid:t,valid:e}}}),w="undefined"!=typeof window&&window.localStorage.getItem("final");if(w){var A=JSON.parse(w);Object.assign(S,A)}(0,o.EH)((function(){var e=JSON.stringify({marks:S.marks,judges:S.judges,competitors:S.competitors});localStorage.setItem("final",e)}),{delay:500}),(0,o.EH)((function(){Date.now();var e=S.marks.map((function(e){return y(e)})),t=S.valid.danceValid.map((function(t,r){var n,a;return t?{marks:S.marks[r],places:null===(n=e[r])||void 0===n||null===(a=n.places)||void 0===a?void 0:a.map((function(e){return e.from}))}:null})).filter((function(e){return!!e})).map((function(e){return e})),r=t.length>1?function(e){var t;if(!(e.length<1)){var r=(null===(t=e[0])||void 0===t?void 0:t.marks.competitors)||0;if(r){for(var n=(0,s.et)(r).map((function(e){return p(e+1)})),a=(0,s.et)(r),l=(0,s._X)(r,r+1),o=(0,s._X)(r,r+1),i=e.map((function(e){return e.marks.judges})).reduce((function(e,t){return e+t})),u={competitors:r,judges:i,marks:d(e.map((function(e){return e.marks})),r,i)},c=[],m=[],f=(0,s._X)(r,e.length+1).map((function(e){return e.map((function(){return""}))})),k=0;k<e.length;k++)for(var E=e[k],y=0;y<r;y++){var j=g(E.places[y]);f[y][k]=j.toString(),a[y]+=j;for(var S=r;S>=j;S--)l[y][S]++,o[y][S]+=j}for(var w=0;w<r;w++)f[w][e.length]=a[w].toString();for(var A,I=v((0,s.Ue)(r),(function(e,t){return a[e]-a[t]})),N=1,x=h(I);!(A=x()).done;){var O=A.value;if(1==O.length){var M=O[0];n[M]=p(N),f[M][e.length+1]=g(n[M]).toString(),N++}else{for(var D,C=O,U=(0,s.et)(r).map((function(){return e.length+1})),Z=h(C);!(D=Z()).done;){var P=D.value;f[P][e.length+1]="punktgleich für "+N+"."}for(;C.length>0;){var _=v(C,(function(e,t){return l[t][N]-l[e][N]}))[0],z=v(_,(function(e,t){return o[e][N]-o[t][N]}))[0];1==z.length?function(){var e=z[0];n[e]=p(N),f[e][U[e]+1]=g(n[e]).toString(),C=C.filter((function(t){return t!=e})),N++}():function(){for(var e,t=h(z);!(e=t()).done;){var r=e.value;f[r][U[r]+1]="punktgleich für "+N+"."}for(var a=b(u,z,N),l=0;l<a.table.length;l++)for(var o=0;o<a.table[l].length;o++){var i,s=a.table[l][o],d=(null===(i=c[l])||void 0===i?void 0:i[o])||"";a.table[l][o]=s>d?s:d}c=a.table;for(var p=v(z,(function(e,t){return g(a.places[e])-g(a.places[t])})),k=0;k<p.length;k++){var E=p[k];if(k>0&&(p.length>2||E.length>1))for(var y,j=h(E);!(y=j()).done;){var S=y.value;U[S]+=2}else{for(var w,A=function(){var e=w.value;n[e]={from:N,to:N+E.length-1},m[e]=a.places[e],f[e][U[e]+2]=g(n[e]).toString(),C=C.filter((function(t){return t!=e}))},I=h(E);!(w=I()).done;)A();N+=E.length}}}()}}}return{places:n,table:f,skatingTable:c,skatingPlaces:m}}}}(t):void 0,n={results:e,skating:r,dances:t.length};(0,o.z)((function(){return S.results=n}))}),{delay:200});var I=S,N=I,x=(0,i.Pi)((function(){return(0,n.useEffect)((function(){document.title="Finalrechner Majoritäts- & Skatingsystem"}),[]),n.createElement(u.W2,null,n.createElement("h1",null,"Finalrechner Majoritäts- & Skatingsystem"),n.createElement("p",null,"Die Wertungen werden automatisch gespeichert."),n.createElement(_,null),n.createElement("br",null),n.createElement(u.zx,{onClick:function(){return N.delete()}},"Wertungen zurücksetzen"),N.marks.map((function(e,t){return n.createElement(M,{dance:t,key:t})})),n.createElement(O,null))})),O=(0,i.Pi)((function(){var e;return null!==(e=N.results)&&void 0!==e&&e.skating?n.createElement("div",{className:"dance-section"},n.createElement("h3",null,"Gesamtergebnis"),n.createElement(z,null),n.createElement("h5",{className:"mt-2 mb-0"},"Ergebnistabelle"),n.createElement(P,{table:(0,o.ZN)(N.results.skating.table),places:N.results.skating.places}),!!N.results.skating.skatingTable.length&&n.createElement(n.Fragment,null,n.createElement("h5",{className:"mt-2 mb-0"},"Skatingtabelle"),n.createElement(Z,{table:N.results.skating.skatingTable,places:N.results.skating.skatingPlaces}))):null})),M=(0,i.Pi)((function(e){var t,r=e.dance,a=null===(t=N.results)||void 0===t?void 0:t.results[r],l=(0,n.useState)((function(){return!1})),o=l[0],i=l[1];return n.createElement("div",{key:r,className:"dance-section"},N.marks.length>1&&n.createElement("h3",null,r+1,". Tanz"),n.createElement(D,{dance:r,places:null==a?void 0:a.places}),n.createElement("br",null),!(null==a||!a.table)&&n.createElement(n.Fragment,null,n.createElement(u.zx,{size:"sm",onClick:function(){return i(!o)}},"Wertungstabelle"),n.createElement(u.UO,{isOpen:o},n.createElement(Z,{table:a.table,places:a.places}))))})),D=(0,i.Pi)((function(e){var t=N.marks[e.dance];if(!t)return null;var r=e.dance*t.competitors*t.judges,a=function(e){var t=document.getElementById("im"+e);null==t||t.focus(),null==t||t.select()};return n.createElement("div",{className:"mark-input"},n.createElement("table",{className:"mark-input"},n.createElement("tbody",null,t.marks.map((function(l,o){return n.createElement("tr",{className:"mark-row",key:o},n.createElement("td",{className:"mark-label"},"#",o+1),l.map((function(i,s){var m,f,v=r++;return n.createElement("td",{className:"mark-input",key:s},n.createElement(u.II,{draggable:"false",onDragStart:function(e){return e.preventDefault()},style:{backgroundColor:!1===(null===(m=N.valid.valid[e.dance])||void 0===m||null===(f=m[o])||void 0===f?void 0:f[s])?"#fcc":void 0},onContextMenu:function(e){return e.preventDefault()},autoComplete:"off",id:"im"+v,inputMode:"numeric",pattern:"[0-9]*",key:s,value:i||"",onFocus:c.Z,onKeyDown:function(e){l[s]||"Backspace"!=e.key?"ArrowUp"==e.key?(e.preventDefault(),a(v-N.judges)):"ArrowDown"==e.key?(e.preventDefault(),a(v+N.judges)):"ArrowRight"==e.key?(e.preventDefault(),a(v+1)):"ArrowLeft"==e.key&&(e.preventDefault(),a(v-1)):(e.preventDefault(),a(v-1))},onInput:function(r){var n,a=parseInt(r.currentTarget.value||"0");a>=0&&a<=t.competitors&&(N.setMark(e.dance,o,s,a),a>0&&(null===(n=document.getElementById("im"+(v+1)))||void 0===n||n.focus()))}}))})),n.createElement("td",{className:"mark-label"},!!e.places&&U(e.places[o])))})))))}));function C(e){return null!=e&&e.from&&null!=e&&e.to?g(e).toLocaleString():"-"}function U(e){if(null==e||!e.from||null==e||!e.to)return"-";var t=g(e.from),r=g(e.to);return t==r?t.toLocaleString():t.toLocaleString()+"-"+r.toLocaleString()}var Z=(0,i.Pi)((function(e){var t,r=e.table,a=e.places;return n.createElement(u.iA,{bordered:!0,responsive:!0,size:"sm",className:"result-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Nr."),null===(t=r[0])||void 0===t?void 0:t.map((function(e,t){return t>0&&n.createElement("th",{key:t},t>1?"1-"+t:t)})),n.createElement("th",null,"Ergebnis"))),n.createElement("tbody",null,r.map((function(e,t){var r;return n.createElement("tr",{key:t},n.createElement("td",null,"#",t+1),e.map((function(e,t){return t>0&&n.createElement("td",{key:t},void 0===e?"—":e)})),n.createElement("td",null,a.length>t&&!!a[t]&&("number"==typeof(null===(r=a[t])||void 0===r?void 0:r.from)?C(a[t]):U(a[t]))))}))))})),P=(0,i.Pi)((function(e){var t,r=e.table,a=e.places,o=Math.max.apply(Math,(0,l.Z)(r.map((function(e){return e.length})))),i=(null===(t=I.results)||void 0===t?void 0:t.dances)||0,c=o-i-2,m=(0,s.Ue)(o);return n.createElement(u.iA,{bordered:!0,responsive:!0,size:"sm",className:"result-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Nr."),(0,s.Ue)(i).map((function(e,t){return n.createElement("th",{key:t},t+1)})),n.createElement("th",null,"Summe"),n.createElement("th",null,"Regel 9"),(0,s.Ue)(c).map((function(e){return n.createElement("th",{key:e},"Regel ",10+e%2)})),n.createElement("th",null,"Ergebnis"))),n.createElement("tbody",null,r.map((function(e,t){return n.createElement("tr",{key:t},n.createElement("td",null,"#",t+1),m.map((function(a){var l=e[a],o=1;if(null!=l&&l.startsWith("punktgleich")){var i;if((null===(i=r[t-1])||void 0===i?void 0:i[a])==l)return null;for(;(null===(u=r[t+o])||void 0===u?void 0:u[a])==l;){var u;o++}}return n.createElement("td",{key:a,rowSpan:o},void 0===l?"—":l)})),n.createElement("td",null,C(a[t])))}))))})),_=(0,i.Pi)((function(){return n.createElement("div",{className:"final-inputs"},n.createElement("form",null,n.createElement(u.BZ,null,n.createElement(u.O3,null,"Teilnehmer"),n.createElement(u.II,{inputMode:"numeric",pattern:"[0-9]*",value:N.competitors,onFocus:c.Z,onChange:function(e){N.setCompetitors(parseInt(e.target.value||"0"))},style:{textAlign:"right"}})),n.createElement(u.BZ,null,n.createElement(u.O3,null,"Wertungsrichter"),n.createElement(u.II,{inputMode:"numeric",pattern:"[0-9]*",value:N.judges,onFocus:c.Z,onChange:function(e){N.setJudges(parseInt(e.target.value||"0"))},style:{textAlign:"right"}})),n.createElement(u.BZ,null,n.createElement(u.O3,null,"Tänze"),n.createElement(u.II,{inputMode:"numeric",pattern:"[0-9]*",value:N.marks.length,onFocus:c.Z,onChange:function(e){return N.setDances(parseInt(e.target.value||"0"))},style:{textAlign:"right"}}))))})),z=(0,i.Pi)((function(){var e,t,r,a=null===(e=N.results)||void 0===e||null===(t=e.skating)||void 0===t?void 0:t.places,l=null===(r=N.results)||void 0===r?void 0:r.results;return a&&l?n.createElement("div",{className:"mark-input"},n.createElement("table",{className:"mark-input"},n.createElement("tbody",null,(0,s.Ue)(N.competitors).map((function(e){return n.createElement("tr",{className:"mark-row",key:e},n.createElement("td",{className:"mark-label"},"#",e+1),(0,s.Ue)(N.marks.length).map((function(t){var r,a;return n.createElement("td",{className:"mark-input",key:t},n.createElement("form",null,n.createElement(u.II,{value:N.valid.danceValid[t]&&g(null===(r=l[t])||void 0===r||null===(a=r.places[e])||void 0===a?void 0:a.from)||"",disabled:!0})))})),n.createElement("td",{className:"mark-label"},C(a[e])))}))))):null}));function T(){return n.createElement(a.Z,{title:"Majoritäts- und Skatingrechner"},n.createElement(x,null))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-2d028a62e5ebb048b289.js.map