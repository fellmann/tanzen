{"version":3,"file":"component---src-pages-index-tsx-f828de3d13ca6424880e.js","mappings":"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","sources":["webpack://ggc-distance/./src/components/selectAll.ts","webpack://ggc-distance/./src/judge/arrayTools.ts","webpack://ggc-distance/./src/judge/calculateFinal.ts","webpack://ggc-distance/./node_modules/klona/dist/index.mjs","webpack://ggc-distance/./src/judge/calculateIncompleteFinal.ts","webpack://ggc-distance/./src/judge/JudgeStore.ts","webpack://ggc-distance/./src/judge/Judge.tsx","webpack://ggc-distance/./src/pages/index.tsx"],"sourcesContent":["export default (e: React.FocusEvent<HTMLInputElement>) =>\r\n  setTimeout(() => e.target.setSelectionRange(0, 10), 1);\r\n","export function arrayWithZeros(n: number) {\r\n  return Array.from({ length: n }, () => 0);\r\n}\r\n\r\nexport function arrayWithIndex(n: number) {\r\n  return Array.from({ length: n }, (_, i) => i);\r\n}\r\nexport function array2dWithZeros(n: number, m: number) {\r\n  return Array.from({ length: n }, () => arrayWithZeros(m));\r\n}\r\n\r\n","import { array2dWithZeros, arrayWithIndex, arrayWithZeros } from \"./arrayTools\";\r\nimport { FinalMarks, Place, ResultTable } from \"./JudgeTypes\";\r\n\r\nexport function getPlaceValue(place?: Place) {\r\n  if (!place) return 0;\r\n  return (place.from + place.to) / 2;\r\n}\r\n\r\nexport function calculateComplete(\r\n  judgement: FinalMarks,\r\n  onlyFor?: number[],\r\n  place?: number\r\n) {\r\n  const majority = Math.floor(judgement.judges / 2) + 1;\r\n\r\n  const competitorValues: {\r\n    majority: number[];\r\n    sum: number[];\r\n    index: number;\r\n  }[] = [];\r\n  for (let c = 0; c < judgement.competitors; c++) {\r\n    const countMajority = arrayWithZeros(judgement.competitors + 1);\r\n    const countSums = arrayWithZeros(judgement.competitors + 1);\r\n    for (let j = 0; j < judgement.judges; j++) {\r\n      const mark = judgement.marks[c]?.[j] ?? 0;\r\n      if (mark > 0)\r\n        for (let m = mark; m <= judgement.competitors; m++) {\r\n          countMajority[m]++;\r\n          countSums[m] += mark;\r\n        }\r\n    }\r\n    competitorValues[c] = { majority: countMajority, sum: countSums, index: c };\r\n  }\r\n\r\n  let remaining = onlyFor || arrayWithIndex(judgement.competitors);\r\n  const table: ResultTable = arrayWithIndex(judgement.competitors).map((i) =>\r\n    arrayWithZeros(judgement.competitors + 1).map((i) => undefined)\r\n  );\r\n  const places: Place[] = [];\r\n  let lookingFor = place || 1;\r\n\r\n  let column = lookingFor;\r\n  while (remaining.length && column <= judgement.competitors) {\r\n    let byMaxMajority = sortAndGroupSame(\r\n      remaining\r\n        .map((r) => competitorValues[r]!!)\r\n        .map((a) => {\r\n          const val = a?.majority[column];\r\n          const tableEntry = table[a?.index || 0];\r\n          if (tableEntry) tableEntry[column] = val == 0 ? \"-\" : val?.toString();\r\n          return a;\r\n        })\r\n        .filter((m) => (m?.majority[column] || 0) >= majority)\r\n        .map((v) => ({\r\n          index: v.index,\r\n          majority: v.majority.slice(column),\r\n          sum: v.sum.slice(column),\r\n        })),\r\n      (a, b) => {\r\n        for (let sortColumn = 0; sortColumn < a.majority.length; sortColumn++) {\r\n          const tableColumn = column + sortColumn;\r\n          table[a.index]!![tableColumn] = a.majority[sortColumn]!!.toString();\r\n          table[b.index]!![tableColumn] = b.majority[sortColumn]!!.toString();\r\n          const sortingByMajority =\r\n            (b.majority[sortColumn] || 0) - (a.majority[sortColumn] || 0);\r\n          if (sortingByMajority) return sortingByMajority;\r\n\r\n          table[a.index]!![tableColumn] += \"\\xA0(\" + a.sum[sortColumn] + \")\";\r\n          table[b.index]!![tableColumn] += \"\\xA0(\" + b.sum[sortColumn] + \")\";\r\n          const sortingBySum =\r\n            (a.sum[sortColumn] || 0) - (b.sum[sortColumn] || 0);\r\n          if (sortingBySum) return sortingBySum;\r\n        }\r\n        return 0;\r\n      }\r\n    );\r\n\r\n    for (const group of byMaxMajority) {\r\n      for (const c of group) {\r\n        places[c.index] = {\r\n          from: lookingFor,\r\n          to: lookingFor + group.length - 1,\r\n        };\r\n        remaining = remaining.filter((i) => i != c.index);\r\n      }\r\n      lookingFor += group.length;\r\n    }\r\n\r\n    column++;\r\n  }\r\n  return { places, table };\r\n}\r\n\r\nexport function exactPlace(n: number) {\r\n  return {\r\n    from: n,\r\n    to: n,\r\n  };\r\n}\r\n\r\nexport function calculateSkating(\r\n  dances: { marks: FinalMarks; places: Place[] }[]\r\n) {\r\n  if (dances.length < 2) return;\r\n  const competitors = dances[0]?.marks.competitors || 0;\r\n  if (!competitors) return;\r\n\r\n  const places: Place[] = arrayWithZeros(competitors).map((i) =>\r\n    exactPlace(i + 1)\r\n  );\r\n\r\n  const sum = arrayWithZeros(competitors);\r\n  const placeCount = array2dWithZeros(competitors, competitors + 1);\r\n  const placeSum = array2dWithZeros(competitors, competitors + 1);\r\n\r\n  const judges = dances.map((i) => i.marks.judges).reduce((a, b) => a + b);\r\n  const skatingJudgement: FinalMarks = {\r\n    competitors,\r\n    judges,\r\n    marks: combineMarks(\r\n      dances.map((i) => i.marks),\r\n      competitors,\r\n      judges\r\n    ),\r\n  };\r\n\r\n  let skatingTable: ResultTable = [];\r\n  let skatingPlaces: Place[] = [];\r\n\r\n  const table: string[][] = array2dWithZeros(\r\n    competitors,\r\n    dances.length + 1\r\n  ).map((i) => i.map(() => \"\"));\r\n\r\n  for (let d = 0; d < dances.length; d++) {\r\n    const dance = dances[d]!!;\r\n    for (let c = 0; c < competitors; c++) {\r\n      const place = getPlaceValue(dance.places[c]);\r\n      table[c]!![d] = place.toString();\r\n      sum[c] += place;\r\n      for (let m = competitors; m >= place; m--) {\r\n        placeCount[c]!![m]++;\r\n        placeSum[c]!![m] += place;\r\n      }\r\n    }\r\n  }\r\n  for (let c = 0; c < competitors; c++) {\r\n    table[c]!![dances.length] = sum[c]!!.toString();\r\n  }\r\n\r\n  const sortedGroups = sortAndGroupSame(\r\n    arrayWithIndex(competitors),\r\n    (a, b) => sum[a]!! - sum[b]!!\r\n  );\r\n\r\n  let place = 1;\r\n  for (const group of sortedGroups) {\r\n    if (group.length == 1) {\r\n      const c = group[0]!!;\r\n      places[c] = exactPlace(place);\r\n      table[c]!![dances.length + 1] = getPlaceValue(places[c]).toString();\r\n      place++;\r\n    } else {\r\n      let remaining = group;\r\n      const tableCol = arrayWithZeros(competitors).map(() => dances.length + 1);\r\n      for (const c of remaining) {\r\n        table[c]!![dances.length + 1] = \"punktgleich für \" + place + \".\";\r\n      }\r\n      while (remaining.length > 0) {\r\n        const byCount = sortAndGroupSame(remaining, (a, b) => {\r\n          return placeCount[b]!![place]!! - placeCount[a]!![place]!!;\r\n        })[0]!!;\r\n\r\n        const firstBySum = sortAndGroupSame(byCount, (a, b) => {\r\n          return placeSum[a]!![place]!! - placeSum[b]!![place]!!;\r\n        })[0]!!;\r\n\r\n        if (firstBySum.length == 1) {\r\n          const c = firstBySum[0]!!;\r\n          places[c] = exactPlace(place);\r\n          table[c]!![tableCol[c]!! + 1] = getPlaceValue(places[c]).toString();\r\n\r\n          remaining = remaining.filter((i) => i != c);\r\n          place++;\r\n        } else {\r\n          for (const c of firstBySum) {\r\n            table[c]!![tableCol[c]!! + 1] = \"punktgleich für \" + place + \".\";\r\n          }\r\n          const skating11Result = calculateComplete(\r\n            skatingJudgement,\r\n            firstBySum,\r\n            place\r\n          );\r\n\r\n          for (let row = 0; row < skating11Result.table.length; row++) {\r\n            for (\r\n              let col = 0;\r\n              col < skating11Result.table[row]!!.length;\r\n              col++\r\n            ) {\r\n              const n = skating11Result.table[row]!![col]!!;\r\n              const o = skatingTable[row]?.[col] || \"\";\r\n              skating11Result.table[row]!![col] = n > o ? n : o;\r\n            }\r\n          }\r\n          skatingTable = skating11Result.table;\r\n\r\n          const rule11 = sortAndGroupSame(\r\n            firstBySum,\r\n            (a, b) =>\r\n              getPlaceValue(skating11Result.places[a]!!) -\r\n              getPlaceValue(skating11Result.places[b]!!)\r\n          );\r\n\r\n          for (let i = 0; i < rule11.length; i++) {\r\n            const rule11Winner = rule11[i]!!;\r\n            if (i > 0 && (rule11.length > 2 || rule11Winner.length > 1)) {\r\n              for (const c of rule11Winner) {\r\n                tableCol[c] += 2;\r\n              }\r\n              continue;\r\n            }\r\n\r\n            for (const c of rule11Winner) {\r\n              places[c] = {\r\n                from: place,\r\n                to: place + rule11Winner.length - 1,\r\n              };\r\n              skatingPlaces[c] = skating11Result.places[c]!!;\r\n              table[c]!![tableCol[c]!! + 2] = getPlaceValue(\r\n                places[c]\r\n              ).toString();\r\n              remaining = remaining.filter((i) => i != c);\r\n            }\r\n            place += rule11Winner.length;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return { places, table, skatingTable, skatingPlaces };\r\n}\r\n\r\nfunction sortAndGroupSame<T>(\r\n  values: T[],\r\n  comparator: (a: T, b: T) => number\r\n): T[][] {\r\n  if (values.length == 0) return [];\r\n  if (values.length == 1) return [values];\r\n\r\n  const sorted = values.sort(comparator);\r\n\r\n  const result: T[][] = [];\r\n  let last = 0;\r\n  for (let first = 0; first < sorted.length; first = last) {\r\n    last = first + 1;\r\n    while (\r\n      last < sorted.length &&\r\n      comparator(sorted[first]!!, sorted[last]!!) == 0\r\n    )\r\n      last++;\r\n\r\n    result.push(sorted.slice(first, last));\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction combineMarks(\r\n  marks: FinalMarks[],\r\n  competitors: number,\r\n  judges: number\r\n): number[][] {\r\n  const result = array2dWithZeros(competitors, judges);\r\n  let jIndex = 0;\r\n  for (const dance of marks) {\r\n    for (let c = 0; c < competitors; c++) {\r\n      for (let j = 0; j < dance.judges; j++) {\r\n        result[c]!![j + jIndex] = dance.marks[c]!![j]!!;\r\n      }\r\n    }\r\n    jIndex += dance.judges;\r\n  }\r\n  return result;\r\n}\r\n","export function klona(x) {\n  if (typeof x !== 'object') return x;\n  var k,\n      tmp,\n      str = Object.prototype.toString.call(x);\n\n  if (str === '[object Object]') {\n    if (x.constructor !== Object && typeof x.constructor === 'function') {\n      tmp = new x.constructor();\n\n      for (k in x) {\n        if (x.hasOwnProperty(k) && tmp[k] !== x[k]) {\n          tmp[k] = klona(x[k]);\n        }\n      }\n    } else {\n      tmp = {}; // null\n\n      for (k in x) {\n        if (k === '__proto__') {\n          Object.defineProperty(tmp, k, {\n            value: klona(x[k]),\n            configurable: true,\n            enumerable: true,\n            writable: true\n          });\n        } else {\n          tmp[k] = klona(x[k]);\n        }\n      }\n    }\n\n    return tmp;\n  }\n\n  if (str === '[object Array]') {\n    k = x.length;\n\n    for (tmp = Array(k); k--;) {\n      tmp[k] = klona(x[k]);\n    }\n\n    return tmp;\n  }\n\n  if (str === '[object Set]') {\n    tmp = new Set();\n    x.forEach(function (val) {\n      tmp.add(klona(val));\n    });\n    return tmp;\n  }\n\n  if (str === '[object Map]') {\n    tmp = new Map();\n    x.forEach(function (val, key) {\n      tmp.set(klona(key), klona(val));\n    });\n    return tmp;\n  }\n\n  if (str === '[object Date]') {\n    return new Date(+x);\n  }\n\n  if (str === '[object RegExp]') {\n    tmp = new RegExp(x.source, x.flags);\n    tmp.lastIndex = x.lastIndex;\n    return tmp;\n  }\n\n  if (str === '[object DataView]') {\n    return new x.constructor(klona(x.buffer));\n  }\n\n  if (str === '[object ArrayBuffer]') {\n    return x.slice(0);\n  } // ArrayBuffer.isView(x)\n  // ~> `new` bcuz `Buffer.slice` => ref\n\n\n  if (str.slice(-6) === 'Array]') {\n    return new x.constructor(x);\n  }\n\n  return x;\n}","import { klona } from \"klona\";\r\nimport { arrayWithZeros } from \"./arrayTools\";\r\nimport { calculateComplete, exactPlace, getPlaceValue } from \"./calculateFinal\";\r\nimport { FinalMarks, PossiblePlace, ResultTable } from \"./JudgeTypes\";\r\n\r\nexport function calculateIncomplete(marks: FinalMarks) {\r\n  const judgement = klona(marks);\r\n\r\n  let setCount = 0;\r\n\r\n  let competitorSet: boolean[] = [];\r\n  const markCount: number[] = arrayWithZeros(judgement.competitors + 1);\r\n  for (let c = 0; c < judgement.competitors; c++) {\r\n    competitorSet[c] = true;\r\n    for (let j = 0; j < judgement.judges; j++) {\r\n      const mark = judgement.marks[c]?.[j] || 0;\r\n      if (mark <= 0 || mark > judgement.competitors) {\r\n        competitorSet[c] = false;\r\n        break;\r\n      }\r\n    }\r\n    if (competitorSet[c]) {\r\n      for (let j = 0; j < judgement.judges; j++) {\r\n        const mark = judgement.marks[c]?.[j] || 0;\r\n        markCount[mark]++;\r\n      }\r\n      setCount++;\r\n    }\r\n  }\r\n\r\n  function distributeMissing(countGood: number) {\r\n    const unset = competitorSet\r\n      .map((set, i) => (!set ? i : -1))\r\n      .filter((i) => i >= 0);\r\n\r\n    if (unset.length == 0) return;\r\n\r\n    const goodOnes = unset.filter((_, i) => i < countGood);\r\n    const badOnes = unset.filter((_, i) => i >= countGood);\r\n\r\n    const missingMarks = [];\r\n    for (let mark = judgement.competitors; mark > 0; mark--) {\r\n      missingMarks.push(\r\n        ...arrayWithZeros(judgement.judges - (markCount[mark] || 0)).map(\r\n          () => mark\r\n        )\r\n      );\r\n    }\r\n\r\n    for (const ones of [goodOnes, badOnes]) {\r\n      const sums = arrayWithZeros(judgement.competitors);\r\n      let sortedOnes = [...ones];\r\n      for (let j = 0; j < judgement.judges; j++) {\r\n        for (let i = 0; i < sortedOnes.length; i++) {\r\n          let markRow = judgement.marks[sortedOnes[i] || 0];\r\n          const mark = missingMarks.pop() || 0;\r\n          if (markRow) markRow[j] = mark;\r\n          sums[sortedOnes[i] || 0] += mark;\r\n        }\r\n        sortedOnes = sortedOnes.sort((a, b) => {\r\n          return -(sums[a] || 0) + (sums[b] || 0);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  let table: ResultTable | undefined;\r\n  let places: PossiblePlace[] = [];\r\n  const unsetPlace: PossiblePlace = {\r\n    from: exactPlace(judgement.competitors),\r\n    to: exactPlace(1),\r\n  };\r\n  for (let c = 0; c < judgement.competitors; c++) {\r\n    if (competitorSet[c])\r\n      places[c] = {\r\n        from: exactPlace(judgement.competitors),\r\n        to: exactPlace(1),\r\n      };\r\n    else places[c] = unsetPlace;\r\n  }\r\n  for (\r\n    let iteration = 0;\r\n    iteration <= judgement.competitors - setCount;\r\n    iteration++\r\n  ) {\r\n    distributeMissing(iteration);\r\n    const result = calculateComplete(judgement);\r\n    table = result.table;\r\n    for (let c = 0; c < judgement.competitors; c++) {\r\n      const possiblePlace = result.places[c];\r\n      if (!possiblePlace) continue;\r\n      const currentPlace = places[c];\r\n      if (currentPlace) {\r\n        if (getPlaceValue(currentPlace.from) > getPlaceValue(possiblePlace)) {\r\n          currentPlace.from = possiblePlace;\r\n        }\r\n        if (getPlaceValue(currentPlace.to) < getPlaceValue(possiblePlace)) {\r\n          currentPlace.to = possiblePlace;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (table && setCount < judgement.competitors - 1)\r\n    for (let c = 0; c < judgement.competitors; c++) {\r\n      if (!competitorSet[c])\r\n        table[c] = arrayWithZeros(judgement.competitors + 1).map((i) => \"\");\r\n    }\r\n\r\n  return { table, places };\r\n}\r\n","import debounce from \"debounce-fn\";\r\nimport { autorun, observable, reaction, runInAction } from \"mobx\";\r\nimport deepEqual from \"fast-deep-equal\";\r\nimport { array2dWithZeros, arrayWithIndex, arrayWithZeros } from \"./arrayTools\";\r\nimport Judge from \"./Judge\";\r\nimport { FinalMarks, Place, PossiblePlace, ResultTable } from \"./JudgeTypes\";\r\nimport { calculateSkating } from \"./calculateFinal\";\r\nimport { calculateIncomplete } from \"./calculateIncompleteFinal\";\r\nimport { collapseTextChangeRangesAcrossMultipleVersions } from \"typescript\";\r\n\r\nfunction initMarks(m: FinalMarks): FinalMarks {\r\n  const marks: FinalMarks = {\r\n    ...m,\r\n    marks: array2dWithZeros(m.competitors, m.judges),\r\n  };\r\n\r\n  for (let c = 0; c < m.competitors; c++) {\r\n    for (let j = 0; j < m.judges; j++) {\r\n      marks.marks[c]!![j] = m.marks[c]?.[j] || 0;\r\n    }\r\n  }\r\n\r\n  return marks;\r\n}\r\n\r\ninterface Results {\r\n  results: {\r\n    table: ResultTable | undefined;\r\n    places: PossiblePlace[];\r\n  }[];\r\n  dances: number;\r\n  skating:\r\n    | {\r\n        places: Place[];\r\n        table: string[][];\r\n        skatingTable: ResultTable;\r\n        skatingPlaces: Place[];\r\n      }\r\n    | undefined;\r\n}\r\n\r\nconst JudgeStore = observable({\r\n  competitors: 6,\r\n  judges: 5,\r\n  marks: [\r\n    initMarks({\r\n      competitors: 6,\r\n      judges: 5,\r\n      marks: [],\r\n    }),\r\n  ],\r\n\r\n  results: undefined as Results | undefined,\r\n\r\n  setMark(dance: number, competitor: number, judge: number, mark: number) {\r\n    const competitorRow = this.marks[dance]?.marks[competitor];\r\n    if (competitorRow) competitorRow[judge] = mark;\r\n  },\r\n\r\n  setCompetitors(count: number) {\r\n    this.competitors = count;\r\n    for (let c = 0; c < this.marks.length; c++) {\r\n      this.marks[c] = initMarks({\r\n        ...this.marks[c]!!,\r\n        competitors: Math.min(9, count),\r\n      });\r\n    }\r\n  },\r\n\r\n  setJudges(count: number) {\r\n    this.judges = count;\r\n    for (let c = 0; c < this.marks.length; c++) {\r\n      this.marks[c] = initMarks({\r\n        ...this.marks[c]!!,\r\n        judges: Math.min(11, count),\r\n      });\r\n    }\r\n  },\r\n\r\n  setDances(count: number) {\r\n    const marks = [];\r\n    for (let c = 0; c < count; c++) {\r\n      marks[c] =\r\n        this.marks[c] ||\r\n        initMarks({\r\n          marks: [],\r\n          judges: this.judges,\r\n          competitors: this.competitors,\r\n        });\r\n    }\r\n    this.marks = marks;\r\n  },\r\n\r\n  delete() {\r\n    if (confirm(\"Alle Wertungen löschen?\")) {\r\n      for (let m = 0; m < this.marks.length; m++) {\r\n        this.marks[m] = initMarks({ ...this.marks[m]!!, marks: [] });\r\n      }\r\n    }\r\n  },\r\n\r\n  get valid(): { danceValid: boolean[]; valid: boolean[][][] } {\r\n    const valid = this.marks.map((i: FinalMarks) =>\r\n      i.marks.map((j) => j.map(() => true))\r\n    );\r\n    const danceValid = this.marks.map(() => true);\r\n    for (let d = 0; d < this.marks.length; d++) {\r\n      const dance = this.marks[d];\r\n      if (!dance) continue;\r\n      for (let j = 0; j < dance.judges; j++) {\r\n        const marks: number[] = [];\r\n        for (let c = 0; c < dance.competitors; c++) {\r\n          const mark = dance.marks[c]?.[j] || 0;\r\n          if (mark <= 0) {\r\n            danceValid[d] = false;\r\n          } else if (mark > dance.competitors) {\r\n            valid[d]!![c]!![j] = false;\r\n            danceValid[d] = false;\r\n          } else if ((marks[mark] ?? -1) >= 0) {\r\n            valid[d]!![c]!![j] = false;\r\n            valid[d]!![marks[mark]!!]!![j] = false;\r\n            danceValid[d] = false;\r\n          }\r\n          marks[mark] = c;\r\n        }\r\n      }\r\n    }\r\n    return { danceValid, valid };\r\n  },\r\n});\r\n\r\nconst data =\r\n  typeof window !== \"undefined\" && window.localStorage.getItem(\"final\");\r\n\r\nif (data) {\r\n  const jsonData = JSON.parse(data);\r\n  Object.assign(JudgeStore, jsonData);\r\n}\r\n\r\nautorun(\r\n  () => {\r\n    const data = JSON.stringify({\r\n      marks: JudgeStore.marks,\r\n      judges: JudgeStore.judges,\r\n      competitors: JudgeStore.competitors,\r\n    });\r\n    localStorage.setItem(\"final\", data);\r\n  },\r\n  { delay: 500 }\r\n);\r\n\r\nautorun(\r\n  () => {\r\n    const start = Date.now();\r\n    const results = JudgeStore.marks.map((dance: FinalMarks) =>\r\n      calculateIncomplete(dance)\r\n    );\r\n\r\n    const skatingDances = JudgeStore.valid.danceValid\r\n      .map((valid, i) =>\r\n        valid\r\n          ? {\r\n              marks: JudgeStore.marks[i]!!,\r\n              places: results[i]?.places?.map((i) => i.from)!!,\r\n            }\r\n          : null\r\n      )\r\n      .filter((i) => !!i)\r\n      .map((i) => i!!);\r\n\r\n    const skating =\r\n      skatingDances.length > 1 ? calculateSkating(skatingDances) : undefined;\r\n\r\n    const d = { results, skating, dances: skatingDances.length };\r\n    runInAction(() => (JudgeStore.results = d));\r\n  },\r\n  { delay: 200 }\r\n);\r\nexport default JudgeStore;\r\n","import React from \"react\";\r\nimport { toJS } from \"mobx\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { useEffect, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Collapse,\r\n  Container,\r\n  Input,\r\n  InputGroup,\r\n  InputGroupText,\r\n  Table,\r\n} from \"reactstrap\";\r\nimport selectAll from \"../components/selectAll\";\r\nimport { arrayWithIndex } from \"./arrayTools\";\r\nimport { getPlaceValue } from \"./calculateFinal\";\r\nimport \"./judge.scss\";\r\nimport JudgeStore from \"./JudgeStore\";\r\nimport { Place, PossiblePlace, ResultTable } from \"./JudgeTypes\";\r\n\r\nconst store = JudgeStore;\r\n\r\nexport default observer(function Judge() {\r\n  useEffect(() => {\r\n    document.title = \"Finalrechner Majoritäts- & Skatingsystem\";\r\n  }, []);\r\n\r\n  return (\r\n    <Container>\r\n      <h1>Finalrechner Majoritäts- &amp; Skatingsystem</h1>\r\n      <p>Die Wertungen werden automatisch gespeichert.</p>\r\n      <FinalConfiguration />\r\n      <br />\r\n      <Button onClick={() => store.delete()}>Wertungen zurücksetzen</Button>\r\n      {store.marks.map((_, d) => {\r\n        return <DanceView dance={d} key={d} />;\r\n      })}\r\n      <SkatingResult />\r\n    </Container>\r\n  );\r\n});\r\n\r\nconst SkatingResult = observer(function SkatingResult() {\r\n  return !store.results?.skating ? null : (\r\n    <div className=\"dance-section\">\r\n      <h3>Gesamtergebnis</h3>\r\n      <FinalResult />\r\n      <h5 className=\"mt-2 mb-0\">Ergebnistabelle</h5>\r\n      <SkatingTableView\r\n        table={toJS(store.results.skating.table)}\r\n        places={store.results.skating.places}\r\n      />\r\n      {!!store.results.skating.skatingTable.length && (\r\n        <>\r\n          <h5 className=\"mt-2 mb-0\">Skatingtabelle</h5>\r\n          <ResultTableView\r\n            table={store.results.skating.skatingTable}\r\n            places={store.results.skating.skatingPlaces}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst DanceView = observer(function DanceView(props: { dance: number }) {\r\n  const d = props.dance;\r\n  const result = store.results?.results[d];\r\n\r\n  const [open, setOpen] = useState(() => false);\r\n\r\n  return (\r\n    <div key={d} className=\"dance-section\">\r\n      {store.marks.length > 1 && <h3>{d + 1}. Tanz</h3>}\r\n      <MarkInput dance={d} places={result?.places} />\r\n      <br />\r\n      {!!result?.table && (\r\n        <>\r\n          <Button size=\"sm\" onClick={() => setOpen(!open)}>\r\n            Wertungstabelle\r\n          </Button>\r\n          <Collapse isOpen={open}>\r\n            <ResultTableView table={result.table} places={result.places} />\r\n          </Collapse>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst MarkInput = observer(function MarkInput(props: {\r\n  dance: number;\r\n  places?: PossiblePlace[];\r\n}) {\r\n  const dance = store.marks[props.dance];\r\n  if (!dance) return null;\r\n  let inpIdx = props.dance * dance.competitors * dance.judges;\r\n\r\n  const focus = (idx: number) => {\r\n    const el = document.getElementById(\"im\" + idx) as HTMLInputElement;\r\n    el?.focus();\r\n    el?.select();\r\n  };\r\n\r\n  return (\r\n    <div className=\"mark-input\">\r\n      <table className=\"mark-input\">\r\n        <tbody>\r\n          {dance.marks.map((competitor, c) => (\r\n            <tr className=\"mark-row\" key={c}>\r\n              <td className=\"mark-label\">#{c + 1}</td>\r\n              {competitor.map((mark, m) => {\r\n                const myIdx = inpIdx++;\r\n                return (\r\n                  <td className=\"mark-input\" key={m}>\r\n                    <Input\r\n                      draggable=\"false\"\r\n                      onDragStart={(e) => e.preventDefault()}\r\n                      style={{\r\n                        backgroundColor:\r\n                          store.valid.valid[props.dance]?.[c]?.[m] === false\r\n                            ? \"#fcc\"\r\n                            : undefined,\r\n                      }}\r\n                      onContextMenu={(e) => e.preventDefault()}\r\n                      autoComplete=\"off\"\r\n                      id={\"im\" + myIdx}\r\n                      inputMode=\"numeric\"\r\n                      pattern=\"[0-9]*\"\r\n                      key={m}\r\n                      value={mark || \"\"}\r\n                      onFocus={selectAll}\r\n                      onKeyDown={(e) => {\r\n                        if (!competitor[m] && e.key == \"Backspace\") {\r\n                          e.preventDefault();\r\n                          focus(myIdx - 1);\r\n                        } else if (e.key == \"ArrowUp\") {\r\n                          e.preventDefault();\r\n                          focus(myIdx - store.judges);\r\n                        } else if (e.key == \"ArrowDown\") {\r\n                          e.preventDefault();\r\n                          focus(myIdx + store.judges);\r\n                        } else if (e.key == \"ArrowRight\") {\r\n                          e.preventDefault();\r\n                          focus(myIdx + 1);\r\n                        } else if (e.key == \"ArrowLeft\") {\r\n                          e.preventDefault();\r\n                          focus(myIdx - 1);\r\n                        }\r\n                      }}\r\n                      onInput={(e) => {\r\n                        const newValue = parseInt(e.currentTarget.value || \"0\");\r\n                        if (newValue >= 0 && newValue <= dance.competitors) {\r\n                          store.setMark(props.dance, c, m, newValue);\r\n                          if (newValue > 0)\r\n                            document\r\n                              .getElementById(\"im\" + (myIdx + 1))\r\n                              ?.focus();\r\n                        }\r\n                      }}\r\n                    />\r\n                  </td>\r\n                );\r\n              })}\r\n              <td className=\"mark-label\">\r\n                {!!props.places && possiblePlaceString(props.places[c])}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n});\r\n\r\nfunction placeString(place?: Place) {\r\n  if (!place?.from || !place?.to) return \"-\";\r\n  else return getPlaceValue(place).toLocaleString();\r\n}\r\n\r\nfunction possiblePlaceString(possiblePlace?: PossiblePlace) {\r\n  if (!possiblePlace?.from || !possiblePlace?.to) return \"-\";\r\n  const fromVal = getPlaceValue(possiblePlace.from);\r\n  const toVal = getPlaceValue(possiblePlace.to);\r\n\r\n  if (fromVal == toVal) return fromVal.toLocaleString();\r\n  else return fromVal.toLocaleString() + \"-\" + toVal.toLocaleString();\r\n}\r\n\r\nconst ResultTableView = observer(function ResultTableView({\r\n  table,\r\n  places,\r\n}: {\r\n  table: ResultTable;\r\n  places: PossiblePlace[] | Place[];\r\n}) {\r\n  return (\r\n    <Table bordered responsive size=\"sm\" className=\"result-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Nr.</th>\r\n          {table[0]?.map(\r\n            (_, i) => i > 0 && <th key={i}>{i > 1 ? \"1-\" + i : i}</th>\r\n          )}\r\n          <th>Ergebnis</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {table.map((row, r) => (\r\n          <tr key={r}>\r\n            <td>#{r + 1}</td>\r\n            {row.map(\r\n              (column, c) =>\r\n                c > 0 && <td key={c}>{column === undefined ? \"—\" : column}</td>\r\n            )}\r\n            <td>\r\n              {places.length > r &&\r\n                !!places[r] &&\r\n                (typeof places[r]?.from == \"number\"\r\n                  ? placeString(places[r] as Place)\r\n                  : possiblePlaceString(places[r] as PossiblePlace))}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </Table>\r\n  );\r\n});\r\n\r\nconst SkatingTableView = observer(function SkatingTableView({\r\n  table,\r\n  places,\r\n}: {\r\n  table: ResultTable;\r\n  places: Place[];\r\n}) {\r\n  const maxCols = Math.max(...table.map((r) => r.length));\r\n  const dances = JudgeStore.results?.dances || 0;\r\n\r\n  const ruleCols = maxCols - dances - 2;\r\n  const cols = arrayWithIndex(maxCols);\r\n\r\n  return (\r\n    <Table bordered responsive size=\"sm\" className=\"result-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Nr.</th>\r\n          {arrayWithIndex(dances).map((_, i) => (\r\n            <th key={i}>{i + 1}</th>\r\n          ))}\r\n          <th>Summe</th>\r\n          <th>Regel 9</th>\r\n          {arrayWithIndex(ruleCols).map((i) => (\r\n            <th key={i}>Regel {10 + (i % 2)}</th>\r\n          ))}\r\n          <th>Ergebnis</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {table.map((row, r) => (\r\n          <tr key={r}>\r\n            <td>#{r + 1}</td>\r\n            {cols.map((c) => {\r\n              const column = row[c];\r\n              let rowspan = 1;\r\n              if (column?.startsWith(\"punktgleich\")) {\r\n                if (table[r - 1]?.[c] == column) return null;\r\n                else {\r\n                  while (table[r + rowspan]?.[c] == column) rowspan++;\r\n                }\r\n              }\r\n              return (\r\n                <td key={c} rowSpan={rowspan}>\r\n                  {column === undefined ? \"—\" : column}\r\n                </td>\r\n              );\r\n            })}\r\n            <td>{placeString(places[r])}</td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </Table>\r\n  );\r\n});\r\n\r\nconst FinalConfiguration = observer(function FinalConfiguration() {\r\n  return (\r\n    <div className=\"final-inputs\">\r\n      <form>\r\n        <InputGroup>\r\n          <InputGroupText>Teilnehmer</InputGroupText>\r\n          <Input\r\n            inputMode=\"numeric\"\r\n            pattern=\"[0-9]*\"\r\n            value={store.competitors}\r\n            onFocus={selectAll}\r\n            onChange={(e) => {\r\n              store.setCompetitors(parseInt(e.target.value || \"0\"));\r\n            }}\r\n            style={{ textAlign: \"right\" }}\r\n          ></Input>\r\n        </InputGroup>\r\n        <InputGroup>\r\n          <InputGroupText>Wertungsrichter</InputGroupText>\r\n          <Input\r\n            inputMode=\"numeric\"\r\n            pattern=\"[0-9]*\"\r\n            value={store.judges}\r\n            onFocus={selectAll}\r\n            onChange={(e) => {\r\n              store.setJudges(parseInt(e.target.value || \"0\"));\r\n            }}\r\n            style={{ textAlign: \"right\" }}\r\n          ></Input>\r\n        </InputGroup>\r\n        <InputGroup>\r\n          <InputGroupText>Tänze</InputGroupText>\r\n          <Input\r\n            inputMode=\"numeric\"\r\n            pattern=\"[0-9]*\"\r\n            value={store.marks.length}\r\n            onFocus={selectAll}\r\n            onChange={(e) => store.setDances(parseInt(e.target.value || \"0\"))}\r\n            style={{ textAlign: \"right\" }}\r\n          ></Input>\r\n        </InputGroup>\r\n      </form>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst FinalResult = observer(function FinalResult() {\r\n  const places = store.results?.skating?.places;\r\n  const result = store.results?.results;\r\n  if (!places || !result) return null;\r\n\r\n  return (\r\n    <div className=\"mark-input\">\r\n      <table className=\"mark-input\">\r\n        <tbody>\r\n          {arrayWithIndex(store.competitors).map((c) => (\r\n            <tr className=\"mark-row\" key={c}>\r\n              <td className=\"mark-label\">#{c + 1}</td>\r\n              {arrayWithIndex(store.marks.length).map((d) => {\r\n                return (\r\n                  <td className=\"mark-input\" key={d}>\r\n                    <form>\r\n                      <Input\r\n                        value={\r\n                          !store.valid.danceValid[d]\r\n                            ? \"\"\r\n                            : getPlaceValue(result[d]?.places[c]?.from) || \"\"\r\n                        }\r\n                        disabled={true}\r\n                      />\r\n                    </form>\r\n                  </td>\r\n                );\r\n              })}\r\n              <td className=\"mark-label\">{placeString(places[c])}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport BaseLayout from \"../components/BaseLayout\";\r\nimport Judge from \"../judge/Judge\";\r\n\r\nexport default function Index() {\r\n  return (\r\n    <BaseLayout title=\"Majoritäts- und Skatingrechner\">\r\n      <Judge />\r\n    </BaseLayout>\r\n  );\r\n}\r\n"],"names":["e","setTimeout","target","setSelectionRange","arrayWithZeros","n","Array","from","length","arrayWithIndex","_","i","array2dWithZeros","m","getPlaceValue","place","to","calculateComplete","judgement","onlyFor","majority","Math","floor","judges","competitorValues","c","competitors","countMajority","countSums","j","mark","marks","sum","index","remaining","table","map","places","lookingFor","column","byMaxMajority","sortAndGroupSame","r","a","val","tableEntry","toString","filter","v","slice","b","sortColumn","tableColumn","sortingByMajority","sortingBySum","group","exactPlace","values","comparator","sorted","sort","result","last","first","push","combineMarks","jIndex","dance","klona","x","k","tmp","str","Object","prototype","call","constructor","hasOwnProperty","defineProperty","value","configurable","enumerable","writable","Set","forEach","add","Map","key","set","Date","RegExp","source","flags","lastIndex","buffer","calculateIncomplete","setCount","competitorSet","markCount","distributeMissing","countGood","unset","goodOnes","badOnes","missingMarks","ones","sums","sortedOnes","markRow","pop","unsetPlace","iteration","possiblePlace","currentPlace","initMarks","JudgeStore","observable","results","undefined","setMark","competitor","judge","competitorRow","this","setCompetitors","count","min","setJudges","setDances","delete","confirm","valid","danceValid","d","data","window","localStorage","getItem","jsonData","JSON","parse","assign","autorun","stringify","setItem","delay","now","skatingDances","skating","dances","placeCount","placeSum","reduce","skatingJudgement","skatingTable","skatingPlaces","sortedGroups","tableCol","byCount","firstBySum","skating11Result","row","col","o","rule11","rule11Winner","calculateSkating","runInAction","store","observer","useEffect","document","title","FinalConfiguration","onClick","DanceView","SkatingResult","className","FinalResult","SkatingTableView","toJS","ResultTableView","props","useState","open","setOpen","MarkInput","size","isOpen","inpIdx","focus","idx","el","getElementById","select","myIdx","draggable","onDragStart","preventDefault","style","backgroundColor","onContextMenu","autoComplete","id","inputMode","pattern","onFocus","selectAll","onKeyDown","onInput","newValue","parseInt","currentTarget","possiblePlaceString","placeString","toLocaleString","fromVal","toVal","bordered","responsive","maxCols","max","ruleCols","cols","rowspan","startsWith","rowSpan","onChange","textAlign","disabled","Index","BaseLayout","Judge"],"sourceRoot":""}